\section{Introduction} \label{sec:introduction}
%Deep Space Missions
%-science (planetary defence)
%    -navigation autonomy
%    -maximising science output
%        -high risk environments
%        -small data budgets
%            -compression
%    -CI
%        -unknown object, small real image database
%-economy
%    -navigation autonomy
%    -knowledge about composition, size and shape -> science
%==> autonomy, max sci, unknown object -> synthetic image generation, compression and reconstruction -> sispo covers all three topics

% SSSBs Motivation:
% - Scientifically interesting
%   - remnants of solar system formation
%   - asteroids: 
%     - remnants of formation of inner planets
%     - rocky
%     - variety
%   - comets:
%     - bombardment
%     - building blocks of life
%     - icy
% - potential threat
% - ISRU
% Remotely many classified, better to improve statistics of up close study 

%SSSBs visited: Ryugu, Bennu, Ceres, C-G, Vesta, Tempel 1, Hartley, Lutetia, Itokava, Steins, Wild 2, Annefrank, Borrelly, Eros, Braille, Mathilde, Ida, Gaspra, Halley, Giacobini-Zinner

% Small sat asteroid: NEA Scout

Studying \glspl{sssb} provides a unique opportunity to understand the evolution of the Solar System, since asteroids, comets and other \glspl{sssb} are remnants of the early formation phase of the Solar System~\cite{walsh2018rubble, a2017comets}. \glspl{sssb} are studied to understand the origin of water and carbon-based molecules on Earth and other planets. While asteroids can be studied to understand the chemical composition of the inner Solar System, long- and short-period comets originate from the Kuiper belt and \"Opik-Oort cloud and can help to understand the chemical composition of the outer and early Solar System.

Currently, most information about \glspl{sssb} is obtained from remote observation with ground based telescopes or space telescopes~\cite{bowles2018castaway}. Remote observations provide statistics of thousands of objects using the same instrument. However, mostly bluk information about orbits, albedos, colours, spectra and sizes of \glspl{sssb} can be obtained due to their small size. In contrast, space missions provide detailed maps of albedos, colours, spectra and surface features, \gls{3d} models, precise mass and density estimates, physical properties and chemical composition, both surface and sub-surface composition. Several missions to \glspl{sssb} are confirmed. The \textit{\gls{ci}} mission by \gls{esa} will target an unknown dynamically-new comet~\cite{snodgrass2019europeanCI}. The \textit{HERA} mission by \gls{esa} and the \textit{\gls{dart}} mission by \gls{nasa} will jointly target the double asteroid (65803) Didymos (1996 GT)~\cite{hera, talbert_2017DART}.

More than \SI{3600}{} comets and \SI{930000}{} asteroids are known~\cite{nasaSBD_count, mpc2020}. The largest group of \glspl{sssb}, namely asteroids, are categorised into \SI{24}{} classes based on their variety in size, spectral type, surface activity and other characteristics~\cite{demeo2009extension}. Approximately \SI{20}{} \glspl{sssb} have been visited by spacecraft~\cite{nasaSBD_missions}. These missions were monolithic, single spacecraft missions which targeted one or a few \glspl{sssb} each. Often these missions were designed as orbiters around one or two \glspl{sssb}. For example the \textit{Hayabusa 2} mission targeted asteroid (162173) Ryugu (1999 JU3) or the \textit{OSIRIS-REx} mission which orbited (101955) Bennu~\cite{Watanabe2017Hayabusa2Overview, lauretta2017osiris}. With costs around \$1~billion for each mission, it seems infeasible to visit many targets and study the large existing variety \cite{ESARosettasQuestions, ArizonaOSIRIS-RExQuestions}.

Performing fly-bys at several objects increases the number of targets at the cost of limited observation time. For example, the \textit{Lucy} mission will perform fly-bys at several of Jupiter's Trojans~\cite{stanbridge2017lucy}. The \textit{CASTAway} or \textit{\gls{mantis}} mission concepts aim at touring main belt asteroids~\cite{bowles2018castaway, rivkin2016mainmantis}. Rapidly developing technology provides more opportunities to study \glspl{sssb} since interplanetary missions become feasible at reasonable costs using small spacecraft~\cite{Poghosyan2017CubeSatMissions, andrews2019asteroid, snodgrass2019europeanCI}. For example, the \textit{\gls{mat}} mission proposes to perform fly-bys at hundreds of main belt asteroids using a fleet of small spacecraft~\cite{Slavinskis2018NanospacecraftSails}. The \textit{HERA} mission will deploy its daughter-spacecraft \textit{APEX} which will autonomously navigate at the Didymos system~\cite{Kohout2018FeasibilityStudy}. In the \textit{\gls{ci}} mission, two daughter-spacecraft will independently fly-by a target and perform measurements~\cite{snodgrass2019europeanCI}.

Small and low-cost spacecraft can not only increase the number of spacecraft that study \glspl{sssb} but also allow to fly closer to their nuclei, which is scientifically more interesting but associated with a higher risk of losing a spacecraft. Flying closer to an \gls{sssb} and using smaller spacecraft inflicts additional constraints onto the data budget of such spacecraft. Miniature radios provide lower data rates due to size and power limitations. A higher probability of losing the spacecraft requires transmitting the most important data first and complementing it later if possible. Compression is used to reduce the amount of data that needs to be transmitted. The two main categories of compression are lossless and lossy compression. Lossless compression does not lose information during the compression process. In contrast, lossy compression accepts a certain amount of irreversible loss of information to achieve higher compression ratios. Lossy image compression results in artefacts. However, artefacts can be made nearly imperceptible depending on the compression method. Therefore, it is necessary to investigate the effect of compression on image data and science return, especially in lossy compression. In addition, an algorithm is required that prioritises which data is transmitted first and which data transmission can be postponed to maximise scientific return.

Designing such deep space missions, maximising their scientific return and targeting unknown objects require a versatile simulation environment to develop, test and validate systems and algorithms. The SurRender software offers such capabilities. However, it is proprietary software developed by Airbus which cannot be accessed by external parties~\cite{Brochard2018ScientificSoftware}. Another software suite that is available for \gls{esa} projects or commercially is \gls{pangu}. However, \gls{pangu} uses OpenGL~3.0 which is limited in its accuracy \cite{Martin2019PlanetaryPANGU}. Other software suites such as the \gls{asp} only provide stereogrammetry~capabilities for geodesy applications and thus can only be used for missions to bodies with existing image archives \cite{Beyer2018TheData}.

Although data sets from the \textit{OSIRIS} instrument aboard \textit{Rosetta}~\cite{osirisArchive} or from the \textit{OSIRIS-REx}, \textit{Dawn} and \textit{NEAR} missions~\cite{palmer2014small} are publicly available, the total number of images and their variation remains small. Since there is only a limited number of real images it is necessary to synthetically create images of \glspl{sssb} for developing systems and algorithms. Synthetic image creation of \glspl{sssb} is currently based on the parametric empirical models for directional reflectance properties of airless regolith surfaces developed in a paper series by Hapke~\cite{Hapke1981BidirectionalTheory, hapke1981bidirectional2, Hapke1984BidirectionalRoughness, Hapke1986BidirectionalEffect, Hapke2002BidirectionalScattering, Hapke2008BidirectionalPorosity, Hapke2012Bidirectional7}. However, the Hapke model is challenged because it is an empirical model with shortcomings, for example with shadows especially at slopes~\cite{shkuratov2012critical}. Shadows are crucial to realistically represent \gls{sssb} surface features. The increase in computing power in recent years can be leveraged to employ ray-tracing techniques to overcome such problems~\cite{shkuratov2012critical, lafortune1996mathematical}.

%Images produced by a mission to a \gls{sssb} can be used to reconstruct the \gls{3d} shape and surface through computer vision techniques. In addition, the number of reconstructed points can be used to quantify the quality of the images.

The \gls{sispo} is being developed to cover the three topics mentioned above. First, physics-based image rendering using ray-tracing is implemented. Second, compression and decompression with different algorithms is performed to investigate the quality loss on the rendered images. Third, a \gls{sfm} processing pipeline is established to reconstruct a \gls{3d} model of the \gls{sssb}. A preliminary code base was developed for a proof of concept for rendering, reconstruction and studying the possibility of transmitting reconstructed \gls{3d} models instead of raw images~\cite{Pajusalu2019CharacterizationMapping}.

The aim of this project is to develop a first version of \gls{sispo} that covers a basic functionality for rendering, compression and reconstruction by adding a compression package and developing the original code base further into a consistent software package. Based on an initial \gls{3d} model, \gls{sispo} shall be able to render images of realistic fly-by scenarios, compress and decompress these images to introduce compression artefacts and reconstruct a \gls{3d} model. This pipeline shall be used to investigate the effects of compression and the possible amount of data reduction. To see the effects of compression, a lossy compression technique with different compression ratios shall be compared to lossless compression. This will provide a first insight into artefacts created by lossy compression and by how much data can be reduced.

This thesis is structured into three main sections and a conclusion. \newline \textbf{Section~\ref{sec:theory}~\nameref{sec:theory}}~provides background information about \glspl{sssb}. Furthermore, important concepts of image rendering and processing are explained. Moreover, an introduction to a the \gls{sfm} technique is provided. The section concludes with background information about relevant image compression and processing techniques. \textbf{Section~\ref{sec:sispo}~\nameref{sec:sispo}}~explains the implementation, design choices and input parameters of the \gls{sispo} software package. \textbf{Section~\ref{sec:results}~\nameref{sec:results}}~presents rendered images, reconstructed \gls{3d} models and effects of compression on them. Moreover, an analysis of the results is presented along with a discussion. \textbf{Section~\ref{sec:conclusion}~\nameref{sec:conclusion}}~summarises the most important findings of the thesis and provides an outlook on possible future developments of \gls{sispo}.

% \begin{enumerate}
%     \item \textbf{Section~\ref{sec:theory} Theory} provides an introduction into the background of \glspl{sssb}, image rendering, compression techniques and \gls{sfm}.
%     \item \textbf{Section~\ref{sec:sispo} \gls{sispo}} elaborates on the implementation of the \gls{sispo} software package and design choices that were made.
%     \item \textbf{Section~\ref{sec:results} Results} shows results created by \gls{sispo} and their analysis.
%     \item \textbf{Section~\ref{sec:conclusion} Conclusion} concludes the document by summarising the content and providing an outlook on possible future developments with \gls{sispo}.
% \end{enumerate}

%All these endeavours lead to an increased number of spacecraft that operate in deep space. Current operations and navigation of spacecraft in deep space relies on \gls{dsn}. Radio signals are used to determine a spacecraft's state vector through ranging and Doppler measurements~\cite{ramamurthy2015delta}. Relying on such an infrastructure limits the number of spacecraft that can be operating in deep space. Additionally, this poses not only a risk to a mission due to reliance on a working ground segment, but is also associated with high costs. High costs are especially relevant to small spacecraft mission, since using a \gls{dsn} would increase the overall mission cost substantially~\cite{steffes2017deep}. Furthermore, when a spacecraft is obstructed by the Sun, it is not possible to communicate with it and therefore not possible to use such techniques~\cite{kominato2006optical}. Another problem with \gls{dsn}-based navigation become apparent with \textit{Comet Interceptor}, where high relative speeds do not allow for long delays associated with ground contacts in deep space. Similarly, with rendez-vous and landing missions to \gls{sssb}s, autonomous orbit determination is essential because mission events are happening too fast for relying on ground interaction~\cite{shuang2013imageprocessing}. An alternative to using a \gls{dsn} are \gls{dsan} technologies. \gls{dsan} comprises trajectory and attitude determination only from on-board data and with on-board available computational power. In a next step, this information would be fed into an \gls{aocs} to correct pointing and trajectory errors. For example, optical navigation can be conducted on-board the spacecraft thus eliminating the requirement of ground contact. Optical navigation was already used in the \textit{Deep Space 1} mission cruise phase (\cite{Riedel2000AutonomousReport},~\cite{bhaskaran2012autonomous}). However, autonomous relative optical navigation in the proximity of a Solar System body will be essential for future deep space exploration and space mining economy (\cite{steffes2017deep},~\cite{martin2006jpl},~\cite{probst2016mission}). Hybrid optical navigation was used in the \textit{Hayabusa} mission in the proximity of the asteroid Itokawa. However, this method still relied on radiometric data from the ground segment~\cite{kominato2006optical}. Therefore, fully autonomous navigation systems still need to be developed.

%In this thesis, the first implementation of \gls{sispo} is developed. The aim was not to complete development of the software package but to provide a first draft. The implementation covers the entire processing pipeline from rendering and compression to reconstruction of a 3D model. These sub components are combined to form \gls{sispo}. To create realistic observation geometries, trajectories are simulated with proper orbital dynamics in the solar system.

%The software package should provide a possibility to simulate different trajectories. Rendering should provide as realistic output as possible. Furthermore, it is necessary to include rendering of various \gls{sssb}s, including different size, shape and surface features. To assess the quality of rendered images and to investigate the impact of compression, it is posited that the quality recovered by an \gls{sfm} pipeline provides a quality measure in the form of the number of reconstructed points, number of vertices and number of faces. \gls{sispo} is being developed to provide these functionalities in a single software package.

%Advancing the field requires improving the statistics on the different types of \gls{sssb}s~\cite{Pajusalu2019CharacterizationMapping}. Several new mission ideas are aiming for this goal. However, technological challenges have to be overcome first. Additionally, new mission concepts like the \gls{ci} mission require a new approach to model \gls{sssb}s. \gls{ci} is a mission that will investigate either a dynamically new comet from the Ã–pik-Oort cloud or an interstellar object. The mission will consist of a main spacecraft and two sub-spacecrafts that will be launched to the \gls{l2} and wait until a suitable \gls{sssb} will pass by. Consequently, the target body will not be known before launch hence systems have to be developed to deal with a large variety of bodies. However, only few \gls{sssb}s have been visited by spacecraft and thus only very limited real images are available. A method to deal with such sparse available data is to synthetically create images of \gls{sssb}s.


%This thesis focuses on image compression and decompression. These effects will be quantified using the reconstructed 3D models against the "ideal" model. A reference instrument definition similar to a suggested instrument for the 'Comet Interceptor' mission. Different compression and decompression algorithms will be evaluated using different \gls{sssb}s. Furthermore, different spacecraft trajectories will be examined to investigate limitations of the simulation environment.
